# Timepon MCP Server

AI-assisted development hygiene tool that tracks file creation and metadata.

## What It Does

- Watches your workspace for new files
- Automatically extracts metadata: creation time, one-line summary, up to 3 tags
- Stores everything in `_timepon.yaml` formatted as a file tree
- Provides MCP tools so AI can query your file history
- Runs silently in the background when Cursor starts

## Installation

### 1. Install Dependencies

```powershell
cd mcp-server
npm install
```

### 2. Configure Cursor

Add this to your Cursor MCP settings file:

**Location:** `C:\Users\Fab2\AppData\Roaming\Cursor\User\globalStorage\rooveterinaryinc.roo-cline\settings\cline_mcp_settings.json`

Or find it via: Cursor Settings â†’ Extensions â†’ Cline/Roo â†’ MCP Settings

```json
{
  "mcpServers": {
    "timepon": {
      "command": "node",
      "args": ["C:\\Users\\Fab2\\Desktop\\AI\\_timecop\\mcp-server\\index.js"],
      "env": {
        "TIMEPON_WORKSPACE": "C:\\Users\\Fab2\\Desktop\\AI\\_timecop"
      }
    }
  }
}
```

**Important:** Adjust the paths if your workspace is located elsewhere.

### 3. Restart Cursor

The server will start automatically when you open Cursor.

## Available Tools

The AI can use these tools to query your file history:

### `get_all_files`
Get all tracked files with metadata (creation time, summary, tags)

### `get_files_by_tag`
Filter files by tag (e.g., "md", "docs", "code", "config")

### `get_recent_files`
Get files created within a time period (default: 24 hours)

### `search_files`
Search files by filename or summary text

### `refresh_metadata`
Force rescan of the workspace

**Performance Note:** This operation processes all tracked files sequentially and may take time with large file counts (e.g., 2000+ files). Use sparingly in production.

## How to Use

### Ask the AI
Just ask questions naturally:
- "Show me all markdown files created today"
- "What files were created in the last hour?"
- "Find files tagged with 'api'"
- "Search for schema-related files"

### Check the YAML
Open `_timepon.yaml` in the workspace root to see the file tree structure.

## Metadata Details

For each file, tracks:

- **Creation time:** When the file was first created (ISO timestamp)
- **Summary:** One-line description extracted from content
  - Markdown: First heading or first line
  - Code: First comment or file type
  - Other: First line or filename
- **Tags:** Up to 3 automatically generated tags
  - File extension (e.g., "md", "js", "py")
  - Category (e.g., "docs", "code", "config")
  - Content-based (e.g., "api", "tasks", "data")

## What Gets Ignored

Files and folders are ignored based on patterns in:

1. **`.tponignore`** - Project-specific ignore patterns (primary source)
2. **`.gitignore`** - Automatically respected as fallback

Both files use standard gitignore syntax. A default `.tponignore` is created with common patterns including:
- `node_modules/`, `vendor/`, `bower_components/`
- `.git/`, `.cursor/`, `.vscode/`, `.idea/`
- `dist/`, `build/`, `out/`, `target/`
- `.DS_Store`, `Thumbs.db`, `*.log`
- `_timepon.yaml` and its backups

To customize, edit `.tponignore` in your project root and restart Cursor.

## Troubleshooting

### Server not starting
Check Cursor's output panel for errors:
1. Open Command Palette (Ctrl+Shift+P)
2. Type "Output"
3. Look for MCP-related logs

### Files not being tracked
- Ensure the file is not in an ignored directory
- Check that the file is actually text-based (binary files are skipped)
- Large files (>1MB) are skipped to avoid performance issues

### Wrong workspace being watched
Set the `TIMEPON_WORKSPACE` environment variable in the MCP settings to your actual workspace path.

## Example YAML Output

```yaml
================================================================================
  TIMEPON FILE TRACKING
  C:\Users\Fab2\Desktop\AI\_timecop
================================================================================
  Last Updated:     Sunday, 18 January 2026 at 15:30:42
  Files Tracked:    245

  This file is automatically generated by Timepon MCP Server
  Files are sorted by creation time (newest first)

  TIP: Use code folding to collapse folders (click arrows by line numbers)
       Ctrl+K Ctrl+0 = fold all | Ctrl+K Ctrl+J = unfold all
================================================================================

workspace: C:\Users\Fab2\Desktop\AI\_timecop
lastUpdated: '2026-01-18T15:30:42.123Z'
totalFiles: 245

files:

  # ðŸ“„ README.md
  README.md:
    created: 18 Jan 2026 14:30 >>(1h ago)<<
    summary: Timepon MCP Server
    tags: [md, docs]

  # === ðŸ“ src
  src:
    # === ðŸ“ api
    api:
      # ðŸ”· schema.ts
      schema.ts:
        created: 18 Jan 2026 14:45 >>(45m ago)<<
        summary: Database schema definitions
        tags: [ts, code, data]

================================================================================
  End of Timepon tracking data
================================================================================
```

## Philosophy

This tool emerged from the observation that AI-assisted development creates documentation chaos: outdated files, conflicting docs, and markdown sprawl. Timepon helps you maintain hygiene by making file history visible to both you and your AI assistants.

See the philosophical discussion in `LifeTheUniverseAndEveryting/consciousness_complexity_epistemology.md` for the full context.
